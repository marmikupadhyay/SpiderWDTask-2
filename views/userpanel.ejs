<%- include('./partials/nav.ejs'); %>
<section class="sec-1" id="sec-1">
  <div class="row">
    <%- include('./partials/sidebar.ejs'); %>
    <div class="col s9 offset-s3 content">
      <div class="row">
        <div class="col s12 main-content">
          <ul class="tabs tabs-fixed-width">
            <li class="tab">
              <a class="active" href="#feed">Feed</a>
            </li>
            <li class="tab">
              <a href="#dashboard">DashBoard</a>
            </li>
            <li class="tab">
              <a href="#workspace">WorkSpace</a>
            </li>
            <li class="tab">
              <a href="#edit-profile">Edit Profile</a>
            </li>
          </ul>
        </div>
        <div id="feed" class="col s12">
          <%- include('./partials/feed.ejs'); %>
        </div>
        <div id="dashboard" class="col s12">
          <%- include('./partials/dashboard.ejs'); %>
        </div>
        <div id="workspace" class="col s12">
          <%- include('./partials/workspace.ejs',{title:"Add Article"}); %>
        </div>
        <div id="edit-profile" class="col s12"></div>
      </div>
    </div>
  </div>
</section>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>
<script>
  window.addEventListener("DOMContentLoaded", e => {
    var instance = M.Tabs.init(document.querySelector(".tabs"), {});

    document.querySelectorAll(".edit").forEach(btn => {
      btn.addEventListener("click", e => {
        var art = e.target.parentElement.parentElement;
        art.querySelector(".more").click();
        if (art.querySelector(".editbox").classList.contains("hide")) {
          art.querySelector(".editbox").classList.remove("hide");
          e.target.innerHTML = "done";
        } else {
          art.querySelector(".editbox").className += " hide";
          e.target.innerHTML = "edit";
        }
      });
    });

    document.querySelectorAll(".more").forEach(btn => {
      btn.addEventListener("click", e => {
        var body = e.target.parentElement.querySelector(".body");
        if (body.style.maxHeight != "none") {
          body.style.maxHeight = "none";
          e.target.innerHTML = "Read Less";
        } else {
          body.style.maxHeight = "100px";
          e.target.innerHTML = "Read More";
        }
      });
    });
  });
</script>
